<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <meta name="author" content="Prof.&nbsp;Maria Tackett">
  <title>STA 210 - Spring 2025 ‚Äì Model evaluation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-318eb5f4afb895565f6c9ce42ff54cac.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="quarto-light">
<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {enableAssistiveMml: false}});</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Model evaluation</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Prof.&nbsp;Maria Tackett 
</div>
</div>
</div>

  <p class="date">Feb 04, 2025</p>
</section>
<section id="announcements" class="slide level2">
<h2>Announcements</h2>
<ul>
<li><p>Lab 02 due Thursday at 11:59pm</p></li>
<li><p>HW 02 released later today</p></li>
<li><p><a href="https://prodduke.sharepoint.com/:p:/s/ARCStaff839/EZ4PKTRTlCVMpFZiR6XoRycB4UUlRMuI2_Rda9hKxNZtsA">Click here</a> to learn more about the Academic Resource Center</p></li>
<li><p><a href="../hw/stats-experience.html">Statistics experience</a> due Tuesday, April 15</p></li>
</ul>
</section>
<section id="office-hours-poll" class="slide level2">
<h2>Office hours poll</h2>
<center>
<iframe width="640px" height="480px" src="https://forms.office.com/r/QTxJvhGSFF?embed=true" frameborder="0" marginwidth="0" marginheight="0" style="border: none; max-width:100%; max-height:100vh" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" msallowfullscreen=""> </iframe>
<p>üîó <a href="https://forms.office.com/r/QTxJvhGSFF" class="uri">https://forms.office.com/r/QTxJvhGSFF</a></p>
</center>
</section>
<section id="topics" class="slide level2">
<h2>Topics</h2>
<div>
<ul>
<li>Recap of MLR and predictor types</li>
<li>Interaction terms</li>
<li>ANOVA and sum of squares</li>
<li><span class="math inline">\(R^2\)</span> and RMSE</li>
</ul>
</div>
</section>
<section id="computational-setup" class="slide level2">
<h2>Computational setup</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># load packages</span></span>
<span id="cb1-2"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-4"><a></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-5"><a></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-6"><a></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-7"><a></a><span class="fu">library</span>(colorblindr)</span>
<span id="cb1-8"><a></a></span>
<span id="cb1-9"><a></a><span class="co"># set default theme and larger font size for ggplot2</span></span>
<span id="cb1-10"><a></a>ggplot2<span class="sc">::</span><span class="fu">theme_set</span>(ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section>
<section id="recap-multiple-linear-regression" class="title-slide slide level1 center">
<h1>Recap: Multiple linear regression</h1>

</section>
<section id="data-palmer-penguins" class="slide level2 midi">
<h2>Data: Palmer penguins</h2>
<p>The <code>penguins</code> data set contains data for penguins found on three islands in the Palmer Archipelago, Antarctica. Data were collected and made available by <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dr.&nbsp;Kristen Gorman</a> and the <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>, a member of the <a href="https://lternet.edu/">Long Term Ecological Research Network</a>. These data can be found in the <strong>palmerpenguins</strong> R package.</p>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 342 √ó 4
   body_mass_g flipper_length_mm bill_length_mm species
         &lt;int&gt;             &lt;int&gt;          &lt;dbl&gt; &lt;fct&gt;  
 1        3750               181           39.1 Adelie 
 2        3800               186           39.5 Adelie 
 3        3250               195           40.3 Adelie 
 4        3450               193           36.7 Adelie 
 5        3650               190           39.3 Adelie 
 6        3625               181           38.9 Adelie 
 7        4675               195           39.2 Adelie 
 8        3475               193           34.1 Adelie 
 9        4250               190           42   Adelie 
10        3300               186           37.8 Adelie 
# ‚Ñπ 332 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="variables" class="slide level2">
<h2>Variables</h2>
<p><strong>Predictors</strong>:</p>
<ul>
<li><code>bill_length_mm</code>: Bill length in millimeters</li>
<li><code>flipper_length_mm</code>: Flipper length in millimeters</li>
<li><code>species</code>: Adelie, Gentoo, or Chinstrap species</li>
</ul>
<p><strong>Response</strong>: <code>body_mass_g</code>: Body mass in grams</p>
<p><br></p>
<p><strong>The goal of this analysis is to use the bill length, flipper length, and species to predict body mass.</strong></p>
</section>
<section id="response-vs.-predictors" class="slide level2 small">
<h2>Response vs.&nbsp;predictors</h2>

<img data-src="08-model-eval_files/figure-revealjs/unnamed-chunk-4-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3000"></section>
<section id="model-fit" class="slide level2">
<h2>Model fit</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>penguin_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(body_mass_g <span class="sc">~</span> flipper_length_mm <span class="sc">+</span> species <span class="sc">+</span> </span>
<span id="cb3-2"><a></a>                bill_length_mm, <span class="at">data =</span> penguins)</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a><span class="fu">tidy</span>(penguin_fit) <span class="sc">|&gt;</span></span>
<span id="cb3-5"><a></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-3904.387</td>
<td style="text-align: right;">529.257</td>
<td style="text-align: right;">-7.377</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">27.429</td>
<td style="text-align: right;">3.176</td>
<td style="text-align: right;">8.638</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speciesChinstrap</td>
<td style="text-align: right;">-748.562</td>
<td style="text-align: right;">81.534</td>
<td style="text-align: right;">-9.181</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">speciesGentoo</td>
<td style="text-align: right;">90.435</td>
<td style="text-align: right;">88.647</td>
<td style="text-align: right;">1.020</td>
<td style="text-align: right;">0.308</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">61.736</td>
<td style="text-align: right;">7.126</td>
<td style="text-align: right;">8.664</td>
<td style="text-align: right;">0.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="interpreting-hatbeta_j" class="slide level2">
<h2>Interpreting <span class="math inline">\(\hat{\beta}_j\)</span></h2>
<ul>
<li>The estimated coefficient <span class="math inline">\(\hat{\beta}_j\)</span> is the expected change in the mean of <span class="math inline">\(Y\)</span> when <span class="math inline">\(X_j\)</span> increases by one unit, <i>holding the values of all other predictor variables constant</i>.</li>
</ul>
<div class="fragment">
<ul>
<li><strong>Example:</strong> The estimated coefficient for <code>flipper_length_mm</code> is 27.429. This means for each additional millimeter in a penguin‚Äôs flipper length, its body mass is expected to be greater by 27.429 grams, on average, <em>holding species and bill length constant.</em></li>
</ul>
</div>
</section>
<section id="indicator-variables" class="slide level2">
<h2>Indicator variables</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">conf.low</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">conf.high</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-3904.387</td>
<td style="text-align: right;">529.257</td>
<td style="text-align: right;">-7.377</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">-4945.450</td>
<td style="text-align: right;">-2863.324</td>
</tr>
<tr class="even">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">27.429</td>
<td style="text-align: right;">3.176</td>
<td style="text-align: right;">8.638</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">21.182</td>
<td style="text-align: right;">33.675</td>
</tr>
<tr class="odd">
<td style="text-align: left; background-color: rgba(220, 229, 178, 255) !important;">speciesChinstrap</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-748.562</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">81.534</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-9.181</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">0.000</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-908.943</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-588.182</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: rgba(220, 229, 178, 255) !important;">speciesGentoo</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">90.435</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">88.647</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">1.020</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">0.308</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-83.937</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">264.807</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">61.736</td>
<td style="text-align: right;">7.126</td>
<td style="text-align: right;">8.664</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">47.720</td>
<td style="text-align: right;">75.753</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<div class="question">
<p>Interpret the coefficient of <code>Gentoo</code> in the context of the data.</p>
</div>
</section>
<section id="centering" class="slide level2 midi">
<h2>Centering</h2>
<ul>
<li>Centering a quantitative predictor means shifting every value by some constant <span class="math inline">\(C\)</span></li>
</ul>
<p><span class="math display">\[
X_{cent} = X  - C
\]</span></p>
<ul>
<li><p>One common type of centering is <strong>mean-centering</strong>, in which every value of a predictor is shifted by its mean</p></li>
<li><p>Only quantitative predictors are centered</p></li>
<li><p>Center all quantitative predictors in the model for ease of interpretation</p></li>
</ul>
<div class="question">
<p>How does centering change the model and/or interpretations?</p>
</div>
</section>
<section id="standardizing" class="slide level2 midi">
<h2>Standardizing</h2>
<ul>
<li>Standardizing a quantitative predictor mean shifting every value by the mean and dividing by the standard deviation of that variable</li>
</ul>
<p><span class="math display">\[
X_{std} = \frac{X - \bar{X}}{S_X}
\]</span></p>
<ul>
<li><p>Only quantitative predictors are standardized</p></li>
<li><p>Standardize all quantitative predictors in the model for ease of interpretation</p></li>
</ul>
<div class="question">
<p>How does standardizing change the model and/or interpretations?</p>
</div>
</section></section>
<section>
<section id="interaction-terms" class="title-slide slide level1 center">
<h1>Interaction terms</h1>

</section>
<section id="interaction-terms-1" class="slide level2">
<h2>Interaction terms</h2>
<ul>
<li>Sometimes the relationship between a predictor variable and the response depends on the value of another predictor variable.</li>
<li>This is an <strong>interaction effect</strong>.</li>
<li>To account for this, we can include <strong>interaction terms</strong> in the model.</li>
</ul>
</section>
<section id="bill-length-versus-species" class="slide level2">
<h2>Bill length versus species</h2>
<p>If the lines are not parallel, there is indication of a potential <strong>interaction effect</strong>, i.e., the slope of bill length may differ based on the species.</p>

<img data-src="08-model-eval_files/figure-revealjs/unnamed-chunk-7-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3000"></section>
<section id="interaction-term-in-model" class="slide level2 smaller">
<h2>Interaction term in model</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>penguin_int_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(body_mass_g <span class="sc">~</span> flipper_length_mm <span class="sc">+</span> species <span class="sc">+</span> bill_length_mm <span class="sc">+</span> species <span class="sc">*</span> bill_length_mm,</span>
<span id="cb4-2"><a></a>      <span class="at">data =</span> penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-4297.905</td>
<td style="text-align: right;">645.054</td>
<td style="text-align: right;">-6.663</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">27.263</td>
<td style="text-align: right;">3.175</td>
<td style="text-align: right;">8.586</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speciesChinstrap</td>
<td style="text-align: right;">1146.287</td>
<td style="text-align: right;">726.217</td>
<td style="text-align: right;">1.578</td>
<td style="text-align: right;">0.115</td>
</tr>
<tr class="even">
<td style="text-align: left;">speciesGentoo</td>
<td style="text-align: right;">54.716</td>
<td style="text-align: right;">619.934</td>
<td style="text-align: right;">0.088</td>
<td style="text-align: right;">0.930</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">72.692</td>
<td style="text-align: right;">10.642</td>
<td style="text-align: right;">6.831</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: rgba(220, 229, 178, 255) !important;">speciesChinstrap:bill_length_mm</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-41.035</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">16.104</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-2.548</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">0.011</td>
</tr>
<tr class="odd">
<td style="text-align: left; background-color: rgba(220, 229, 178, 255) !important;">speciesGentoo:bill_length_mm</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-1.163</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">14.436</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-0.081</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">0.936</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="interaction-terms-in-the-model" class="slide level2 midi">
<h2>Interaction terms in the model</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-4297.905</td>
<td style="text-align: right;">645.054</td>
<td style="text-align: right;">-6.663</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">flipper_length_mm</td>
<td style="text-align: right;">27.263</td>
<td style="text-align: right;">3.175</td>
<td style="text-align: right;">8.586</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speciesChinstrap</td>
<td style="text-align: right;">1146.287</td>
<td style="text-align: right;">726.217</td>
<td style="text-align: right;">1.578</td>
<td style="text-align: right;">0.115</td>
</tr>
<tr class="even">
<td style="text-align: left;">speciesGentoo</td>
<td style="text-align: right;">54.716</td>
<td style="text-align: right;">619.934</td>
<td style="text-align: right;">0.088</td>
<td style="text-align: right;">0.930</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: right;">72.692</td>
<td style="text-align: right;">10.642</td>
<td style="text-align: right;">6.831</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: rgba(220, 229, 178, 255) !important;">speciesChinstrap:bill_length_mm</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-41.035</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">16.104</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-2.548</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">0.011</td>
</tr>
<tr class="odd">
<td style="text-align: left; background-color: rgba(220, 229, 178, 255) !important;">speciesGentoo:bill_length_mm</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-1.163</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">14.436</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">-0.081</td>
<td style="text-align: right; background-color: rgba(220, 229, 178, 255) !important;">0.936</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<div class="question">
<ul>
<li>Write the model equation for penguins in the Adelie species.</li>
<li>Write the model equation for penguins in the Chinstrap species.</li>
</ul>
</div>
</section>
<section id="interpreting-interaction-terms" class="slide level2">
<h2>Interpreting interaction terms</h2>
<ul>
<li>What the interaction means: The effect of bill length on the body mass is 41.035 less when the penguin is from the Chinstrap species compared to the effect for the Adelie species, holding all else constant.</li>
<li>Interpreting <code>bill_length_mm</code> for Chinstrap: For each additional millimeter in bill length, we expect the body mass of Chinstrap penguins to increase by 31.657 grams (72.692 - 41.035), holding all else constant.</li>
</ul>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<p><br></p>
<div class="question">
<p>In general, how do</p>
<ul>
<li><p>indicators for categorical predictors impact the model equation?</p></li>
<li><p>interaction terms impact the model equation?</p></li>
</ul>
</div>
</section></section>
<section>
<section id="model-evaluation" class="title-slide slide level1 center">
<h1>Model evaluation</h1>

</section>
<section id="data-restaurant-tips" class="slide level2">
<h2>Data: Restaurant tips</h2>
<p>Which variables help us predict the amount customers tip at a restaurant? To answer this question, we will use data collected in 2011 by a student at St.&nbsp;Olaf who worked at a local restaurant.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 √ó 4
    Tip Party Meal   Age   
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
1  2.99     1 Dinner Yadult
2  2        1 Dinner Yadult
3  5        1 Dinner SenCit
4  4        3 Dinner Middle
5 10.3      2 Dinner SenCit
6  4.85     2 Dinner Middle
7  5        4 Dinner Yadult
8  4        3 Dinner Middle</code></pre>
</div>
</div>

<aside><div>
<div class="small">
<p>Dahlquist, Samantha, and Jin Dong. 2011. ‚ÄúThe Effects of Credit Cards on Tipping.‚Äù Project for Statistics 212-Statistics for the Sciences, St.&nbsp;Olaf College</p>
</div>
</div></aside></section>
<section id="variables-1" class="slide level2">
<h2>Variables</h2>
<p><strong>Predictors</strong>:</p>
<div>
<ul>
<li><code>Party</code>: Number of people in the party</li>
<li><code>Meal</code>: Time of day (Lunch, Dinner, Late Night)</li>
<li><code>Age</code>: Age category of person paying the bill (Yadult, Middle, SenCit)</li>
</ul>
</div>
<p><strong>Response</strong>: <code>Tip</code>: Amount of tip in US dollars</p>
</section>
<section id="response-tip" class="slide level2">
<h2>Response: <code>Tip</code></h2>

<img data-src="08-model-eval_files/figure-revealjs/unnamed-chunk-13-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3000"><div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Q1</th>
<th style="text-align: right;">Median</th>
<th style="text-align: right;">Q3</th>
<th style="text-align: right;">Max</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">19.46</td>
<td style="text-align: right;">4.98</td>
<td style="text-align: right;">3.37</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="predictors" class="slide level2">
<h2>Predictors</h2>

<img data-src="08-model-eval_files/figure-revealjs/unnamed-chunk-15-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3000"></section>
<section id="relevel-categorical-predictors" class="slide level2">
<h2>Relevel categorical predictors</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>tips <span class="ot">&lt;-</span> tips <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-3"><a></a>    <span class="at">Meal =</span> <span class="fu">fct_relevel</span>(Meal, <span class="st">"Lunch"</span>, <span class="st">"Dinner"</span>, <span class="st">"Late Night"</span>),</span>
<span id="cb6-4"><a></a>    <span class="at">Age  =</span> <span class="fu">fct_relevel</span>(Age, <span class="st">"Yadult"</span>, <span class="st">"Middle"</span>, <span class="st">"SenCit"</span>)</span>
<span id="cb6-5"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="predictors-again" class="slide level2">
<h2>Predictors, again</h2>

<img data-src="08-model-eval_files/figure-revealjs/unnamed-chunk-17-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3000"></section>
<section id="response-vs.-predictors-1" class="slide level2">
<h2>Response vs.&nbsp;predictors</h2>

<img data-src="08-model-eval_files/figure-revealjs/unnamed-chunk-18-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3600"></section>
<section id="fit-and-summarize-model" class="slide level2 midi">
<h2>Fit and summarize model</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>tip_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(Tip <span class="sc">~</span> Party <span class="sc">+</span> Age, <span class="at">data =</span> tips)</span>
<span id="cb7-2"><a></a></span>
<span id="cb7-3"><a></a><span class="fu">tidy</span>(tip_fit) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-0.170</td>
<td style="text-align: right;">0.366</td>
<td style="text-align: right;">-0.465</td>
<td style="text-align: right;">0.643</td>
</tr>
<tr class="even">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1.837</td>
<td style="text-align: right;">0.124</td>
<td style="text-align: right;">14.758</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AgeMiddle</td>
<td style="text-align: right;">1.009</td>
<td style="text-align: right;">0.408</td>
<td style="text-align: right;">2.475</td>
<td style="text-align: right;">0.014</td>
</tr>
<tr class="even">
<td style="text-align: left;">AgeSenCit</td>
<td style="text-align: right;">1.388</td>
<td style="text-align: right;">0.485</td>
<td style="text-align: right;">2.862</td>
<td style="text-align: right;">0.005</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p><br></p>
<div class="question">
<p>Overall, how well does this model help us understand variability n tips?</p>
</div>
</div>
</section>
<section id="two-statistics" class="slide level2">
<h2>Two statistics</h2>
<ul>
<li><p><strong>Root mean square error, RMSE</strong>: A measure of the average error (average difference between observed and predicted values of the outcome)</p></li>
<li><p><strong>R-squared</strong>, <span class="math inline">\(R^2\)</span> : Percentage of variability in the outcome explained by the regression model</p></li>
</ul>
<div class="question">
<p>What indicates a good model fit? Higher or lower RMSE? Higher or lower <span class="math inline">\(R^2\)</span>?</p>
</div>
</section>
<section id="rmse" class="slide level2">
<h2>RMSE</h2>
<p><span class="math display">\[
RMSE = \sqrt{\frac{\sum_{i=1}^n(y_i - \hat{y}_i)^2}{n}} = \sqrt{\frac{\sum_{i=1}^ne_i^2}{n}}
\]</span></p>
<div class="fragment">
<div>
<ul>
<li class="fragment"><p>Ranges between 0 (perfect predictor) and infinity (terrible predictor)</p></li>
<li class="fragment"><p>Same units as the response variable</p></li>
<li class="fragment"><p>The value of RMSE is more useful for comparing across models than evaluating a single model</p></li>
</ul>
</div>
</div>
</section>
<section id="compute-rmse-augmented-data-frame" class="slide level2">
<h2>Compute RMSE: Augmented data frame</h2>
<p>Use the <code>augment()</code> function from the <strong>broom</strong> package to add columns for predicted values, residuals, and other observation-level model statistics</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>tip_aug <span class="ot">&lt;-</span> <span class="fu">augment</span>(tip_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 169 √ó 9
     Tip Party Age    .fitted .resid   .hat .sigma   .cooksd .std.resid
   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1  2.99     1 Yadult    1.67  1.32  0.0247   2.04 0.00274        0.657
 2  2        1 Yadult    1.67  0.333 0.0247   2.05 0.000173       0.165
 3  5        1 SenCit    3.05  1.95  0.0371   2.04 0.00911        0.972
 4  4        3 Middle    6.35 -2.35  0.0111   2.04 0.00376       -1.16 
 5 10.3      2 SenCit    4.89  5.45  0.0301   2.00 0.0571         2.71 
 6  4.85     2 Middle    4.51  0.337 0.0126   2.05 0.0000881      0.166
 7  5        4 Yadult    7.18 -2.18  0.0471   2.04 0.0148        -1.09 
 8  4        3 Middle    6.35 -2.35  0.0111   2.04 0.00376       -1.16 
 9  5        2 Middle    4.51  0.487 0.0126   2.05 0.000184       0.240
10  1.58     1 SenCit    3.05 -1.47  0.0371   2.04 0.00524       -0.737
# ‚Ñπ 159 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="finding-rmse-in-r" class="slide level2">
<h2>Finding RMSE in R</h2>
<p>Use the <code>rmse()</code> function from the <strong>yardstick</strong> package (part of <strong>tidymodels</strong>)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="fu">rmse</span>(tip_aug, <span class="at">truth =</span> Tip, <span class="at">estimate =</span> .fitted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        2.02</code></pre>
</div>
</div>
<p><br></p>
<div class="fragment">
<div class="question">
<p>Is the model a good fit for the data? What information do you need to make this determination?</p>
</div>
</div>
</section></section>
<section>
<section id="analysis-of-variance-anova" class="title-slide slide level1 center">
<h1>Analysis of variance (ANOVA)</h1>

</section>
<section id="analysis-of-variance-anova-1" class="slide level2">
<h2>Analysis of variance (ANOVA)</h2>
<p><strong>Analysis of Variance (ANOVA)</strong>: Technique to partition variability in Y by the sources of variability</p>

<img data-src="images/clipboard-3964457409-01.png" class="r-stretch"></section>
<section id="anova" class="slide level2">
<h2>ANOVA</h2>
<ul>
<li><strong>Main Idea:</strong> Decompose the total variation in the response into
<ul>
<li><p>the variation that can be explained by the each of the variables in the model</p></li>
<li><p>the variation that <strong>can‚Äôt</strong> be explained by the model (left in the residuals)</p></li>
</ul></li>
<li>If the variation that can be explained by the variables in the model is greater than the variation in the residuals, this signals that the model might be ‚Äúvaluable‚Äù (at least one of the <span class="math inline">\(\beta\)</span>‚Äôs not equal to 0)</li>
</ul>
</section>
<section id="sum-of-squares" class="slide level2">
<h2>Sum of Squares</h2>
<p><br></p>
<p><span class="math display">\[
\begin{aligned}
\color{#407E99}{SST} \hspace{5mm}&amp;= &amp;\color{#993399}{SSM} &amp;\hspace{5mm} +  &amp;\color{#8BB174}{SSR} \\[10pt]
\color{#407E99}{\sum_{i=1}^n(y_i - \bar{y})^2} \hspace{5mm}&amp;= &amp;\color{#993399}{\sum_{i = 1}^{n}(\hat{y}_i - \bar{y})^2} &amp;\hspace{5mm}+ &amp;\color{#8BB174}{\sum_{i = 1}^{n}(y_i - \hat{y}_i)^2}
\end{aligned}
\]</span></p>

<aside><div>
<p><a href="https://introregression.netlify.app/98-appendix#sum-of-squares">Click here</a> to see why this equality holds.</p>
</div></aside></section>
<section id="anova-output-in-r1" class="slide level2">
<h2>ANOVA output in R<sup>1</sup></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">anova</span>(tip_fit) <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">sumsq</th>
<th style="text-align: right;">meansq</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: right;">285.71</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
<td style="text-align: right;">19.01</td>
<td style="text-align: right;">4.57</td>
<td style="text-align: right;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
<td style="text-align: right;">4.16</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p><a href="anova-table.html">Click here</a> for explanation about the way R calculates sum of squares for each variable.</p></li></ol></aside></section>
<section id="anova-output-with-totals" class="slide level2">
<h2>ANOVA output, with totals</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">sumsq</th>
<th style="text-align: left;">meansq</th>
<th style="text-align: left;">statistic</th>
<th style="text-align: left;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
<td style="text-align: left;">1188.64</td>
<td style="text-align: left;">285.71</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
<td style="text-align: left;">19.01</td>
<td style="text-align: left;">4.57</td>
<td style="text-align: left;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
<td style="text-align: left;">4.16</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1913.11</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="sum-of-squares-1" class="slide level2">
<h2>Sum of squares</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><span class="math inline">\(SST\)</span>: Sum of squares total, variability of the response, <span class="math inline">\(\sum_{i = 1}^n (y_i - \bar{y})^2\)</span></li>
<li><span class="math inline">\(SSR\)</span>: Sum of squares residuals, variability of residuals, <span class="math inline">\(\sum_{i = 1}^n (y_i - \hat{y}_i)^2\)</span></li>
<li><span class="math inline">\(SSM = SST - SSR\)</span>: Sum of squares model, variability explained by the model</li>
</ul>
</div></div>
</section>
<section id="sum-of-squares-sst" class="slide level2">
<h2>Sum of squares: <span class="math inline">\(SST\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: rgba(217, 227, 228, 255) !important;">Total</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">168</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<center>
<p><span class="math inline">\(SST\)</span>: Sum of squares total, variability of the response</p>
<p><br></p>
<p><span class="math inline">\(\sum_{i = 1}^n (y_i - \bar{y})^2\)</span> = 1913.11</p>
</center>
</section>
<section id="sum-of-squares-ssr" class="slide level2">
<h2>Sum of squares: <span class="math inline">\(SSR\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Party</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left; background-color: rgba(217, 227, 228, 255) !important;">Residuals</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">165</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<center>
<p><span class="math inline">\(SSR\)</span>: Sum of squares residuals, variability of residuals</p>
<p><br></p>
<p><span class="math inline">\(\sum_{i = 1}^n (y_i - \hat{y}_i)^2\)</span> = 686.44</p>
</center>
</section>
<section id="sum-of-squares-ssm" class="slide level2">
<h2>Sum of squares: <span class="math inline">\(SSM\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sumsq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; background-color: rgba(217, 227, 228, 255) !important;">Party</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">1</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">1188.64</td>
</tr>
<tr class="even">
<td style="text-align: left; background-color: rgba(217, 227, 228, 255) !important;">Age</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">2</td>
<td style="text-align: right; background-color: rgba(217, 227, 228, 255) !important;">38.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Residuals</td>
<td style="text-align: right;">165</td>
<td style="text-align: right;">686.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">168</td>
<td style="text-align: right;">1913.11</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<center>
<p><span class="math inline">\(SSM\)</span>: Sum of squares model, Variability explained by the model</p>
<p><br></p>
<p><span class="math inline">\(SST - SSR\)</span> = 1226.67</p>
</center>
</section>
<section id="r2" class="slide level2">
<h2><span class="math inline">\(R^2\)</span></h2>
<p>The <strong>coefficient of determination</strong> <span class="math inline">\(R^2\)</span> is the proportion of variation in the response, <span class="math inline">\(Y\)</span>, that is explained by the regression model</p>
<div class="fragment">
<p><span class="math display">\[
R^2 = \frac{SSM}{SST} = 1 - \frac{SSR}{SST} = 1 - \frac{686.44}{1913.11} = 0.641
\]</span></p>
</div>
<div class="fragment">
<div class="question">
<p>What is the range of <span class="math inline">\(R^2\)</span>? Does <span class="math inline">\(R^2\)</span> have units?</p>
</div>
</div>
</section>
<section id="interpreting-r2" class="slide level2">
<h2>Interpreting <span class="math inline">\(R^2\)</span></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">glance</span>(tip_fit)<span class="sc">$</span>r.squared</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6411891</code></pre>
</div>
</div>
<div class="fragment">
<div class="question">
<p>Select the best interpretation for <span class="math inline">\(R^2\)</span> .</p>
<ol type="a">
<li>Party and age correctly predicts 64.12% of tips.</li>
<li>64.12% of the variability in tips can be explained by party and age.</li>
<li>64.12% of the variability in party and age can be explained by tips.</li>
<li>64.12% of the time tips can be predicted by party and age.</li>
</ol>
</div>
</div>
</section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<ul>
<li><p>Introduced interaction terms</p></li>
<li><p>Introduced ANOVA and sum of squares</p></li>
<li><p>Introduced <span class="math inline">\(R^2\)</span> and RMSE</p></li>
</ul>
</section>
<section id="next-class" class="slide level2">
<h2>Next class</h2>
<ul>
<li>Model comparison</li>
</ul>


</section></section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../images/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://sta210-sp25.netlify.app">üîó STA 210 - Spring 2025</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/sta210-sp25\.netlify\.app");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>