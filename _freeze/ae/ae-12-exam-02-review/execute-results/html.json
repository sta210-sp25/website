{
  "hash": "e7b9bf565f9c24097eab64577c0a31d6",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AE 12: Exam 02 Review\"\ndate: \"April 15, 2025\"\neditor: visual\nexecute: \n  warning: false\n  message: false\n---\n\n\n\n::: callout-important\nGo to the course GitHub organization and locate your ae-12 repo to get started.\n\nRender, commit, and push your responses to GitHub by the end of class to submit your AE.\n:::\n\n## Packages\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(knitr)\nlibrary(pROC)\n```\n:::\n\n\n\n## Exercise 1\n\nSuppose you fit a simple linear regression model.\n\na.  Draw or describe a scatterplot that contains an observation with large leverage but low Cookâ€™s distance.\n\nb.  Draw or describe a scatterplot that contains an observation with large leverage and high Cookâ€™s distance.\n\nc.  Draw or describe a scatterplot that contains an observation with a large studentized residual.\n\n## Data: Credit cards\n\nThe data for this analysis is about credit card customers. It can be found in the file `credit.csv`. The following variables are in the data set:\n\n-   `income`: Income in \\$1,000's\n-   `limit`: Credit limit\n-   `rating`: Credit rating\n-   `cards`: Number of credit cards\n-   `age`: Age in years\n-   `education`: Number of years of education\n-   `own`: A factor with levels `No` and `Yes` indicating whether the individual owns their home\n-   `student`: A factor with levels `No` and `Yes` indicating whether the individual was a student\n-   `married`: A factor with levels `No` and `Yes` indicating whether the individual was married\n-   `region`: A factor with levels `South`, `East`, and `West` indicating the region of the US the individual is from\n-   `balance`: Average credit card balance in \\$.\n\n**The objective of this analysis is to predict whether a person has maxed out their credit card, i.e., had \\$0 average card balance.**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncredit <- read_csv(\"data/credit.csv\") |>\n  mutate(maxed = factor(if_else(balance == 0, 1, 0)))\n```\n:::\n\n\n\n## Exercise 2\n\n-   Why is logistic regression the best modeling approach for this analysis?\n\n-   Describe where each of the following show up in the analysis:\n\n    -   log-odds ...\n\n    -   odds\n\n    -   probabilities\n\n## Exercise 3\n\nWeâ€™ll start by splitting the model into training and testing data. Then we'll using the training data to fit a model for predicting the odds of `maxed = 1` using `income`, `rating`, and `region`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# make training and test sets\nset.seed(210)\ncredit_split <- initial_split(credit, prop = 0.8)\ncredit_train <- training(credit_split)\ncredit_test <- testing(credit_split)\n\ncredit_fit <- glm(maxed ~ income + rating + region, data = credit_train, \n                  family = \"binomial\")\n\ntidy(credit_fit) |>\n  kable(digits = 3)\n```\n\n::: {.cell-output-display}\n\n\n|term        | estimate| std.error| statistic| p.value|\n|:-----------|--------:|---------:|---------:|-------:|\n|(Intercept) |   10.097|     1.687|     5.987|   0.000|\n|income      |    0.115|     0.026|     4.444|   0.000|\n|rating      |   -0.058|     0.009|    -6.428|   0.000|\n|regionSouth |   -0.632|     0.715|    -0.884|   0.377|\n|regionWest  |   -0.332|     0.724|    -0.458|   0.647|\n\n\n:::\n:::\n\n\n\nThe logistic regression model takes the following form:\n\n$$\n \\log(\\frac{\\pi_i}{1 - \\pi_i}) = \\beta_0 + \\beta_1 ~ income + \\beta_2 ~ rating + \\beta_3 ~ regionSouth + \\beta_4 ~ regionWest\n$$\n\na.  Write the interpretation of `income` in terms of the odds of maxing out a credit card.\n\nb.  Use the equation above to show the expected change in the odds of maxing out a credit card when the credit rating increases by 10 points. Assume income and region are constant. Write your answer in terms of $\\beta_0, \\beta_1, \\beta_2, \\beta_3, \\beta_4$.\n\nc.  Suppose there are two individuals. Individual 1 has an income of \\$64,000, a credit rating of 590, and is from the South region. Individual 2 has an income of \\$135,000, a credit rating of 695, and is from the East region. Use the equation above to show how the odds of maxing out a credit card differ between Individual 1 and Individual 2. Write your answer in terms of $\\beta_0, \\beta_1, \\beta_2$, etc.\n\n## Exercise 4\n\nWe consider adding the interaction between `region` and `income` to the current model. We'll use a drop-in-deviance test to determine whether or not to add the interaction term.\n\na.  State the null and alternative hypotheses in words and using mathematical notation.\nb.  Describe what the test statistic $G$ means in the context of the data.\nc.  Show why the degrees of freedom for the test statistic are equal to 2.\nd.  Conduct the drop-in-deviance test and state your conclusion in the context of the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n\n## Exercise 5\n\nNow let's evaluate the performance of the selected model using the testing data.\n\nCreate a confusion matrix using a cutoff probability of 0.3.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n\n-   What is the sensitivity? What does it mean in the context of the data ?\n\n-   What is the specificity? What does it mean in the context of the data?\n\n-   What is the false positive rate? What does it mean in the context of the data?\n\n-   What is the false negative rate? What does it mean in the context of the data?\n\n## Exercise 6\n\nProduce the ROC curve.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n\n-   Describe how you can use this curve to select a cutoff probability (rather than just going with 0.5).\n\n## Exercise 7\n\nQuestions about checking conditions for logistic regression:\n\n-   Do we assess conditions on the training or testing set?\n\n-   Why do we not consider categorical predictors when checking linearity?\n\n-   Why do we not need to check constant variance for logistic regression?\n\n# Submission\n\n::: callout-important\nTo submit the AE:\n\n-   Render the document to produce the PDF with all of your work from todayâ€™s class.\n\n-   Push all your work to your AE repo on GitHub. Youâ€™re done! ðŸŽ‰\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}