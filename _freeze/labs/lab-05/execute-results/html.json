{
  "hash": "c4e09c6afb53bd6789eccbe0cbf69433",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 05: Logistic Regression\"\nexecute:\n  freeze: auto\n  echo: true\n  eval: false\n  warning: false\n  message: false\nformat: html\nbibliography: references.bib\n---\n\n\n\n\n::: callout-important\n# Due date\n\nThis lab is due on **Thursday, March at 27 11:59pm.** To be considered on time, the following must be done by the due date:\n\n-   Final `.qmd` and `.pdf` files pushed to your team's GitHub repo\n-   Final `.pdf` file submitted on Gradescope\n:::\n\n# Logistic Regression\n\nIn this lab, you will use logistic regression analysis to classify rice varieties based on features derived from image data. You will fit and interpret the logistic regression models using training data, then use testing data to assess how well the model classifies observations into the two varieties.\n\n# Learning goals\n\nBy the end of the lab you will be able to…\n\n-   conduct exploratory data analysis for data with a binary response variable.\n\n-   fit and interpret logistic regression model.\n\n-   use relevant metrics and subject-matter context to identify a threshold for classification.\n\n-   use training and testing data to fit and assess model performance.\n\n-   Develop strategies for dealing with merge conflicts\n\n## Merge Conflicts (uh oh)\n\n![Collaboration with no merge conflict](images/merge-no-conflict.png)\n\n![Collaboration with a merge conflict](images/merge-conflict.png)\n\nYou may have seen something like the image above through the course of your collaboration. When two collaborators make changes to a file and push the file to their repository, git merges these two files.\n\nIf these two files have conflicting content on the same line, git will produce a **merge conflict**. Merge conflicts need to be resolved manually, as they require a human intervention:\n\n![Merge conflict identifiers](images/merge-conflict-identifiers.png)\n\nTo resolve the merge conflict, decide if you want to keep only your text, the text on GitHub, or incorporate changes from both texts. Delete the conflict markers `<<<<<<<`, `=======`, `>>>>>>>` and make the changes you want in the final merge.\n\n**Assign numbers 1, 2, 3, and 4 to each of your team members** (if only 3 team members, just number 1 through 3). Go through the following steps in detail, which simulate a merge conflict. Completing this exercise will be part of the lab grade.\n\n### Resolving a merge conflict\n\n**Step 1: Everyone** clone the **merge-conflict** assignment repo in RStudio and open file **merge-conflict.qmd**.\n\n**Member 4** should look at the group's repo on GitHub.com to ensure that the other members' files are pushed to GitHub after every step.\n\n**Step 2: Member 1** Change the team name to your team name. *Render, commit, and push*.\n\n**Step 3: Member 2** Change the team name to something different (i.e., not your team name). *Render, commit, and push*.\n\nYou should get an error.\n\n**Pull** and review the document with the merge conflict. Read the error to your teammates. You can also show them the error by sharing your screen. A merge conflict occurred because you edited the same part of the document as Member 1. Resolve the conflict with whichever name you want to keep, then render, commit and push again.\n\n**Step 4: Member 3** Write some narrative in the space provided. You should get an error.\n\nThis time, no merge conflicts should occur, since you edited a different part of the document from Members 1 and 2. Read the error to your teammates. You can also show them the error by sharing your screen.\n\nClick to pull. Then *render, commit, and push.*\n\n**You have successfully completed the merge conflict activity! There is nothing to submit on Gradescope for this activity.** **Please ask your TA if you have any questions about merge conflicts and collaborating in GitHub.**\n\n# Getting started\n\n-   A repository has already been created for you and your teammates. Everyone in your team has access to the same repo.\n\n-   Go to the [sta210-sp25](https://www.github.com/sta210-sp25) organization on GitHub. Click on the repo with the prefix **lab-05**. It contains the starter documents you need to complete the lab.\n\n-   Clone the repo and start a new project in RStudio. See the [Lab 00 instructions](https://sta210-sp25.netlify.app/labs/lab-00#getting-started) for details on cloning a repo and starting a new project in R.\n\n-   Each person on the team should clone the repository and open a new project in RStudio. Throughout the lab, each person should get a chance to make commits and push to the repo.\n\n# Workflow: Using Git and GitHub as a team\n\n::: callout-important\nThere are no Team Member markers in this lab; however, you should use a similar workflow as in [Lab 03](../lab-03.html). Only one person should type in the group’s .qmd file at a time to avoid merge conflicts. Once that person has finished typing the group’s responses, they should *render, commit, and push* the changes to GitHub. All other teammates can *pull* to see the updates in RStudio.\n\nEvery teammate must have at least one commit in the lab. Everyone is expected to contribute to discussion even when they are not typing.Packages\n:::\n\nYou will use the following packages in today’s lab. Add other packages as needed.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(knitr)\nlibrary(pROC)\n```\n:::\n\n\n\n\n# Data\n\nThe data in this lab contains measures describing the shape and structure of two rice varieties - *Cammeo* and *Osmancik*. To curate the data set, researchers used images from over 3,000 grains a rice in these two varieties. They then used automated methods to process the image data and extract 7 morphological features (features related to the structure) from each image. The data were originally presented and analyzed in @cinar2019classification and was obtained from the [UCI Machine Learning Repository](https://archive.ics.uci.edu/dataset/545/rice+cammeo+and+osmancik).\n\nThis analysis will focus on the following variables:\n\n-   `Class`: Cammeo or Osmancik\n\n-   `Area`: Size of the rice grain measured in pixels\n\n-   `Eccentricity`: A measure of how round the ellipse is, i.e., how close the shape of the grain is to a circle.\n\n[Click here](https://archive.ics.uci.edu/dataset/545/rice+cammeo+and+osmancik) for the full data dictionary.\n\n\n\n\n::: {.cell lable='read-data'}\n\n```{.r .cell-code}\nrice <- read_csv(\"data/rice.csv\")\n```\n:::\n\n\n\n\n# Exercises\n\n**Goal**: The goal of the analysis is to use Area and Eccentricity to identify grains from the Cammeo variety versus those from the Osmancik variety.\n\n## Exercise 1\n\nWe'll begin by exploring the data. Create a scatterplot of `Area` versus `Eccentricity` with the color and shape of the points by `Class`.\n\n## Exercise 2\n\nBased on the plot from the previous exercise, do you think the two types of rice can be distinguished based on `Area` and `Eccentricity`. Briefly explain.\n\n## Exercise 3\n\nWith this type of classification problem, it is common to test the performance of a logistic regression model by splitting the data into a *training* and a *test* set. This means that we will choose a random subset of the data to estimate the regression coefficient, and we will then test the predictions on the remaining observations.\n\n-   Randomly select 75% of the rows of the data to create the training set `rice_train` . Use `set.seed(221)`.\n\n-   Put the remaining 25% of the observations in the test set called `rice_test`.\n\n## Exercise 4\n\nIn a logistic regression model, the *log-odds* of the response being \"1\" (or a \"success\") is given by $$\\log\\Big(\\frac{p_i}{1-p_i}\\Big) = \\beta_0 + \\beta_1X_1 + \\dots + \\beta_pX_p$$\n\nIn this analysis a \"success\" is the Class \"Osmancik\".\n\na.  What does each $p_i$ represent in the context of this analysis?\n\nb.  How is the probability of the response variable being \"1\" calculated from the log-odds? Show or explain the mathematical steps to go from the log-odds to the probability in your response.\n\n## Exercise 5\n\na.  Use `rice_train` to fit the logistic regression model for the response variable `Class` on the predictors `Area` and `Eccentricity` Neatly display the output using 3 digits.\n\nb.  Does the intercept have any reasonable interpretation? If so, interpret the intercept. Otherwise explain why not.\n\n## Exercise 6\n\nInterpret the coefficients on `Area` and `Eccentricity` in the context of the data in terms of the odds.\n\n## Exercise 7\n\na.  How would you expect the log-odds of the rice grain being of the Osmancik variety to change if the measures eccentricity changes from 0.85 to 0.9?\n\nb.  How would you expect the odds of the rice grain being of the Osmancik variety to change if the measures eccentricity changes from 0.85 to 0.9?\n\n## Exercise 8\n\nNow let's test our model on the test set. Use the `predict()` function to obtain the predicted probabilities of the rice being Osmancik for the observations in `rice_test.`\n\n## Exercise 9\n\nWith these estimated probabilities, we can now try to classify the rice in the test set. Choose a threshold for assigning a class to each observation based on the estimated probability. Briefly explain your reasoning for selecting the threshold, including any analysis used to make your decision.\n\n## Exercise 10\n\nCompare the estimated class assignments you constructed with the actual classes. Comment on the result and thus the model performance.\n\n# Submission\n\nYou will submit the PDF documents for labs, homework, and exams in to Gradescope as part of your final submission.\n\n::: callout-warning\nBefore you wrap up the assignment, make sure all documents are updated on your GitHub repo. We will be checking these to make sure you have been practicing how to commit and push changes.\n\nRemember – you must turn in a PDF file to the Gradescope page before the submission deadline for full credit.\n:::\n\nTo submit your assignment:\n\n-   Access Gradescope through the [STA 210 Canvas site](https://canvas.duke.edu/courses/47067).\n\n-   Click on the assignment, and you’ll be prompted to submit it.\n\n-   Select all team members’ names, so they receive credit on the assignment. [Click here](https://help.gradescope.com/article/m5qz2xsnjy-student-add-group-members) for video on adding team members to assignment on Gradescope.\n\n-   Mark the pages associated with each exercise. All of the pages of your lab should be associated with at least one question (i.e., should be “checked”).\n\n-   Select the first page of your .PDF submission to be associated with the *“Workflow & formatting”* section.\n\n# Grading\n\n| Component               | Points |\n|:------------------------|:-------|\n| Ex 1                    | 3      |\n| Ex 2                    | 4      |\n| Ex 3                    | 3      |\n| Ex 4                    | 5      |\n| Ex 5                    | 4      |\n| Ex 6                    | 6      |\n| Ex 7                    | 6      |\n| Ex 8                    | 2      |\n| Ex 9                    | 4      |\n| Ex 10                   | 4      |\n| Workflow & formatting   | 4      |\n| Merge conflict activity | 5      |\n\nThe “Workflow & formatting” grade is to assess the reproducible workflow and collaboration. This includes having at least one meaningful commit from each team member, a neatly organized document with readable code, and updating the team name and date in the YAML.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}