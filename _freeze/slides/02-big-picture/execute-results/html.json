{
  "hash": "c2b428c4556e37d22ca889800574abc2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The big picture\"\nsubtitle: \"Analyzing multivariable relationships + Reproducibility\"\nauthor: \"Prof. Maria Tackett\"\ndate: \"2025-01-14\"\ndate-format: \"MMM DD, YYYY\"\nfooter: \"[üîó STA 210 - Spring 2025](https://sta210-sp25.netlify.app)\"\nlogo: \"../images/logo.png\"\nformat: \n  revealjs: \n    theme: slides.scss\n    multiplex: false\n    transition: fade\n    slide-number: true\n    incremental: false \n    chalkboard: true\n    include-before: [ '<script type=\"text/x-mathjax-config\">MathJax.Hub.Config({tex2jax: {enableAssistiveMml: false}});</script>']\nhtml-math-method:\n  method: mathjax\n  url: \"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"\n  html: \n    output-file: 02-big-picture-notes.html\nexecute:\n  freeze: auto\n  echo: true\nknitr:\n  opts_chunk: \n    R.options:      \n    width: 200\nbibliography: references.bib\n---\n\n\n\n\n\n## Announcements\n\n-   Office hours start this week\n    -   See office hours schedule on Canvas\n-   Complete [Lab 00 tasks](../labs/lab-00.html)\n-   Introduction to R workshops at Duke library\n    -   [Data wrangling with dplyr](https://duke.libcal.com/event/13664829) - Thu, Jan 16 at 12pm\n    -   [Data visualization with ggplot2](https://duke.libcal.com/event/13660125) - Thu, Jan 23 at 12pm\n\n# Questions from last class?\n\n## Topics\n\n-   Data analysis life cycle\n-   Reproducible data analysis\n-   Analyzing multivariable relationships\n\n------------------------------------------------------------------------\n\n![Source: [*R for Data Science*](https://r4ds.hadley.nz/) with additions from *The Art of Statistics: How to Learn from Data*.](images/02/data-analysis-life-cycle.png)\n\n------------------------------------------------------------------------\n\n![Source:[*R for Data Science*](https://r4ds.hadley.nz/)](images/02/whole-game.png)\n\n# Reproducibility\n\n## Reproducibility checklist\n\n::: question\nWhat does it mean for an analysis to be reproducible?\n:::\n\n. . .\n\n**Near term goals**:\n\n‚úîÔ∏è Can the tables and figures be exactly reproduced from the code and data?\n\n‚úîÔ∏è Does the code actually do what you think it does?\n\n‚úîÔ∏è In addition to what was done, is it clear *why* it was done?\n\n. . .\n\n**Long term goals**:\n\n‚úîÔ∏è Can the code be used for other data?\n\n‚úîÔ∏è Can you extend the code to do other things?\n\n## Why is reproducibility important?\n\n-   Results produced are more reliable and trustworthy [@ostblom2022]\n\n-   Facilitates more effective collaboration [@ostblom2022]\n\n-   Contributing to science, which builds and organizes knowledge in terms of testable hypotheses [@alexander2023]\n\n-   Possible to identify and correct errors or biases in the analysis process [@alexander2023]\n\n## Why is reproducibility important? {.midi}\n\n![](images/02/jama-retraction.png){fig-align=\"center\" width=\"55%\"}\n\n<div>\n\n-   Originally reported \"the intervention, compared with usual care, resulted in a fewer number of mean COPD-related hospitalizations and emergency department visits at 6 months per participant.\"\n\n-   There were actually **more** COPD-related hospitalizations and emergency department visits in the intervention group compared to the control group\n\n-   Mixed up the intervention vs. control group using \"0/1\" coding\n\n</div>\n\n:::: aside\n::: small\n<https://jamanetwork.com/journals/jama/fullarticle/2752474>\n:::\n::::\n\n## Toolkit\n\n-   **Scriptability** $\\rightarrow$ R\n\n-   **Literate programming** (code, narrative, output in one place) $\\rightarrow$ Quarto\n\n-   **Version control** $\\rightarrow$ Git / GitHub\n\n## R and RStudio\n\n-   R is a statistical programming language\n\n-   RStudio is a convenient interface for R (an integrated development environment, IDE)\n\n![Source: [Statistical Inference via Data Science](https://moderndive.com/1-getting-started.html)](images/02/r_vs_rstudio_1.png){fig-align=\"center\"}\n\n------------------------------------------------------------------------\n\n## RStudio IDE\n\n![](images/02/rstudio-panes.png){fig-align=\"center\"}\n\n------------------------------------------------------------------------\n\n## Quarto\n\n-   Fully reproducible reports -- the analysis is run from the beginning each time you render\n\n-   Code goes in chunks and narrative goes outside of chunks\n\n-   Visual editor to make document editing experience similar to a word processor (Google docs, Word, Pages, etc.)\n\n## Quarto\n\n![](images/02/quarto.png){fig-align=\"center\"}\n\n## How will we use Quarto?\n\n-   Every application exercise and assignment is written in a Quarto document\n\n-   You'll have a template Quarto document to start with\n\n-   The amount of scaffolding in the template will decrease over the semester\n\n# Version control with git and GitHub\n\n## What is versioning?\n\n<br>\n\n![](images/02/lego-steps.png){fig-align=\"center\"}\n\n------------------------------------------------------------------------\n\n## What is versioning?\n\nwith human readable messages\n\n![](images/02/lego-steps-commit-messages.png){fig-align=\"center\"}\n\n------------------------------------------------------------------------\n\n## Why do we need version control?\n\n::::: columns\n::: {.column width=\"50%\"}\n![](images/02/phd_comics_vc.gif){fig-align=\"center\"}\n:::\n\n::: {.column width=\"50%\"}\nProvides a clear record of how the analysis methods evolved. This makes analysis auditable and thus more trustworthy and reliable. [@ostblom2022]\n:::\n:::::\n\n## git and GitHub\n\n![](images/02/git-github.png){fig-align=\"center\"}\n\n-   **git** is a version control system -- like \"Track Changes\" features from Microsoft Word.\n-   **GitHub** is the home for your git-based projects on the internet (like DropBox but much better).\n-   There are a lot of git commands and very few people know them all. 99% of the time you will use git to add, commit, push, and pull.\n\n# Multivariable relationships\n\n## Education and life expectancy\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n\nThe data set comes from @zarulli2021 who analyze the effects of a country's healthcare expenditures and other factors on the country's life expectancy. The data are originally from the [Human Development Database](http://hdr.undp.org/en/data.) and [World Health Organization](https://apps.who.int/nha/database/).\n\nThere are 140 countries (observations) in the data set.\n\n::: aside\n[Click here](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0253450) for the original research paper.\n:::\n\n------------------------------------------------------------------------\n\n## Variable definitions\n\n::: incremental\n-   `life_exp`: *The average number of years that a newborn could expect to live, if he or she were to pass through life exposed to the sex- and age-specific death rates prevailing at the time of his or her birth, for a specific year, in a given country, territory, or geographic area.* ( from the [World Health Organization](https://www.who.int/data/gho/indicator-metadata-registry/imr-details/65#:~:text=Definition%3A,%2C%20territory%2C%20or%20geographic%20area.))\n\n-   `income_inequality`: *Measure of the deviation of the distribution of income among individuals or households within a country from a perfectly equal distribution. A value of 0 represents absolute equality, a value of 100 absolute inequality (Gini coefficient).*\n:::\n\n## Variable definitions\n\n-   `education`: Indicator of whether a country's education index is above (`High`) or below (`Low`) the median index for the 140 countries in the data set.\n    -   Education index: *Average of mean years of schooling (of adults) and expected years of school (of children), both expressed as an index obtained by scaling wit the corresponding maxima.*\n\n## Terminology\n\n-   `life_exp` is the **response variable**\n    -   variable whose variation we want to understand / variable we wish to predict\n    -   also known as *outcome* or *dependent* variable\n\n. . .\n\n-   `income_inequality`, `education` are the **predictor variables**\n    -   variables used to account for variation in the response\n    -   also known as *explanatory*, *independent*, or *input* variables\n\n## Univariate exploratory data analysis\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](02-big-picture_files/figure-revealjs/univariate-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n## Bivariate exploratory data analysis\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](02-big-picture_files/figure-revealjs/bivariate-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n## Function between response and predictors\n\n::: goal\n$$\\text{life_exp} = f(\\text{income_inequality}, \\text{education}) + \\epsilon$$\n:::\n\n-   **Goal**: Determine $f$\n-   How do we determine $f$?\n    -   Make an assumption about the functional form $f$ (parametric model)\n    -   Use the data to fit a model based on that form\n\n## Determine $f$\n\n1)  Choose the functional form of $f$, i.e., **choose the appropriate model given the response variable**\n\n-   Suppose $f$ takes the form of a linear model\\\n    $$y = f(\\mathbf{X}) = \\beta_0 + \\beta_1 x_1 + \\dots + \\beta_p x_p + \\epsilon$$\n\n. . .\n\n2.  Use the data to fit (or train) the model, i.e, **compute estimates of the model parameters**, denoted $\\hat{\\beta}_0, \\hat{\\beta}_1, \\ldots, \\hat{\\beta}_p$\n\n## `life_exp` vs. `income_inequality`\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](02-big-picture_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n$$\\widehat{\\text{life_exp}} = \\hat{\\beta}_0 + \\hat{\\beta}_1 ~\\text{income_inequality}$$\n\n------------------------------------------------------------------------\n\n## `life_exp` vs. `income_inequality` + `education` {.midi}\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](02-big-picture_files/figure-revealjs/unnamed-chunk-5-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n$$\\widehat{\\text{life_exp}} = \\hat{\\beta}_0 + \\hat{\\beta}_1 ~\\text{income_inequality} + \\hat{\\beta}_2 ~\\text{education}$$\n\n## Statistical model vs. regression equation {.midi}\n\n**Statistical model (also known as the data-generating model)**\n\n::: equation\n$${\\small \\text{life_exp} = \\beta_0 + \\beta_1 ~\\text{income_inequality} + \\beta_2 ~\\text{education} + \\epsilon}$$\n:::\n\nModels the process for generating values of the response in the population (function + error), i.e., the [population-level]{.underline} model.\n\n<br>\n\n. . .\n\n**Regression equation (also known as the fitted model)**\n\nEstimate of the function using the sample data\n\n::: equation\n$${\\small \\widehat{\\text{life_exp}} = \\hat{\\beta}_0 + \\hat{\\beta}_1 ~\\text{income_inequality} + \\hat{\\beta}_2 ~\\text{education}}$$\n:::\n\n## `life_exp` vs. `income_inequality` + `education` (with interaction) {.midi}\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](02-big-picture_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n$${\\small \\widehat{\\text{life_exp}} = \\hat{\\beta}_0 + \\hat{\\beta}_1 ~\\text{income_inequality} + \\hat{\\beta}_2 ~\\text{education} + \\hat{\\beta}_3 ~ \\text{income_inequality} \\times \\text{education}}$$\n\n## Why fit a model?\n\n-   **Prediction:** Expected value of the response variable for given values of the predictor variables\n\n-   **Inference:** Conclusion about the relationship between the response and predictor variables\n\n. . .\n\n::: question\n-   What is an example of a **prediction** question that can be answered using the model of `life_exp` vs. `income_inequality` and `education`?\n\n-   What is an example of an **inference** question that can be answered using the model of `life_exp` vs.`income_inequality` and `education`?\n:::\n\n# Application exercise\n\n::: appex\nüìã [sta210-sp25.netlify.app/ae/ae-02-life-expectancy](../ae/ae-02-life-expectancy.html)\n:::\n\n## Recap {.midi}\n\n-   **Reproducibility**\n\n    -   It is best practice conduct all data analysis in a reproducible way\n\n    -   We will implement a reproducible workflow using R, Quarto, and git/GitHub\n\n<!-- -->\n\n-   **Multivariable relationships**\n\n    -   We can use exploratory data analysis to describe the relationship between two variables\n\n    -   We make an assumption about the relationship between variables when doing linear regression\n\n    -   The two main objectives for fitting a linear regression model are (1) prediction and (2) inference\n\n## For next time\n\n-   Complete [Lec 03 - Simple linear regression prepare](../prepare/prepare-lec03.html)\n\n-   Bring fully-charged laptop or device with keyboard for in-class application exercise (AE)\n\n## References\n",
    "supporting": [
      "02-big-picture_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}